╔══════════════════════════════════════════════════════════════════════════╗
║              AUTO FITTING MODULE - 界面布局指南                          ║
╚══════════════════════════════════════════════════════════════════════════╝

## 主程序界面布局

当点击"🔍 Auto Fit"按钮后，右侧显示的完整界面：

┌─────────────────────────────────────────────────────────────────────────┐
│  左侧导航栏                      │            右侧内容区域                 │
│                                 │                                        │
│  ┌───────────────┐             │  ╔═══════════════════════════════════╗ │
│  │ 🎭  Mask      │             │  ║  控制面板 (紧凑型)                  ║ │
│  ├───────────────┤             │  ╠═══════════════════════════════════╣ │
│  │ ⚗️  Batch Int.│             │  ║ [Load] [Auto Find] [Fit] [Reset]  ║ │
│  ├───────────────┤             │  ║ [Save] | Method: [▼] | BG: [OFF]  ║ │
│  │ 🔬  BCDI Cal. │             │  ╚═══════════════════════════════════╝ │
│  ├───────────────┤             │                                        │
│  │ 💎  Dioptas   │             │  ┌─────────────────────────────────┐  │
│  ├───────────────┤             │  │                                 │  │
│  │ 🔍  Auto Fit ◄├─── 点击这里  │  │    Matplotlib 图表区域          │  │
│  │    (激活状态) │             │  │                                 │  │
│  ├───────────────┤             │  │  • XRD数据曲线                   │  │
│  │ 📈  curvefit  │             │  │  • 峰标记（红色三角）            │  │
│  ├───────────────┤             │  │  • 拟合曲线（绿色）              │  │
│  │ 📊  eosfit    │             │  │  • 背景曲线（橙色虚线）           │  │
│  └───────────────┘             │  │  • 交互式缩放和平移               │  │
│                                 │  │  • 工具栏控制                    │  │
│                                 │  │                                 │  │
│                                 │  └─────────────────────────────────┘  │
│                                 │                                        │
│                                 │  ┌─────────────────────────────────┐  │
│                                 │  │  结果表格                        │  │
│                                 │  ├──┬────────┬──────┬──────┬──────┤  │
│                                 │  │P │ 2theta │ FWHM │ Area │ ...  │  │
│                                 │  ├──┼────────┼──────┼──────┼──────┤  │
│                                 │  │1 │ 28.447 │ 0.15 │ 1234 │ ...  │  │
│                                 │  │2 │ 40.281 │ 0.18 │ 890  │ ...  │  │
│                                 │  └──┴────────┴──────┴──────┴──────┘  │
│                                 │                                        │
│                                 │  ┌─────────────────────────────────┐  │
│                                 │  │  信息日志                        │  │
│                                 │  │  > Loaded: sample_001.xy         │  │
│                                 │  │  > Auto-detected 8 peaks         │  │
│                                 │  │  > Fitting completed             │  │
│                                 │  └─────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘


## 详细功能区域说明

┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  1. 控制面板 (Control Panel)                                         ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

  第一行按钮：
  ┌─────────────┐ ┌──────────────┐ ┌───────────┐ ┌───────┐ ┌──────────┐
  │ Load File   │ │ Auto Find    │ │ Fit Peaks │ │ Reset │ │ Save     │
  │             │ │ Peaks        │ │           │ │       │ │ Results  │
  └─────────────┘ └──────────────┘ └───────────┘ └───────┘ └──────────┘
      紫色            紫色             粉紫色       粉红色     绿色

  第二行设置：
  [Fit Method: pseudo_voigt ▼]  [BG Selection Mode: OFF]  状态：Ready
       拟合方法选择                 背景选择模式             状态显示


┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  2. Matplotlib图表区域 (Interactive Plot)                           ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

  交互方式：
  • 🖱️ 左键点击  → 添加峰选择（红色三角标记）
  • 🖱️ 右键点击  → 删除峰选择
  • 🔍 滚轮上滚  → 放大图表
  • 🔍 滚轮下滚  → 缩小图表
  • 🛠️ 工具栏     → Home, Back, Forward, Pan, Zoom, Save

  显示内容：
  • 蓝色实线   - 原始XRD数据
  • 红色三角   - 选定的峰位置（标记为P1, P2, ...）
  • 绿色曲线   - 拟合后的峰曲线
  • 橙色虚线   - 背景曲线
  • 紫色背景   - 淡紫色网格背景


┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  3. 结果表格 (Results Table)                                         ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

  ┌────┬──────────┬─────────┬─────────┬───────────┬────────┬────────┬──────┐
  │Peak│ 2theta   │  FWHM   │  Area   │ Amplitude │ Sigma  │ Gamma  │ Eta  │
  ├────┼──────────┼─────────┼─────────┼───────────┼────────┼────────┼──────┤
  │ P1 │  28.447  │  0.1523 │  1234.5 │   890.2   │ 0.0647 │ 0.0647 │ 0.50 │
  │ P2 │  40.281  │  0.1801 │   890.3 │   567.8   │ 0.0765 │ 0.0765 │ 0.50 │
  │ P3 │  50.156  │  0.2145 │   456.7 │   234.1   │ 0.0911 │ 0.0911 │ 0.50 │
  └────┴──────────┴─────────┴─────────┴───────────┴────────┴────────┴──────┘

  参数说明：
  • 2theta    - 峰位置（角度）
  • FWHM      - 半高宽（全宽度半高度）
  • Area      - 峰面积（积分强度）
  • Amplitude - 峰高（最大强度）
  • Sigma     - 高斯分量宽度
  • Gamma     - 洛伦兹分量宽度
  • Eta       - 混合比例（0=纯高斯，1=纯洛伦兹）


┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃  4. 信息日志 (Info Panel)                                            ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

  实时显示操作信息：
  ┌─────────────────────────────────────────────────────────────────┐
  │ Welcome! Load your XRD data file to begin peak fitting.         │
  │ Successfully loaded: sample_001.xy                               │
  │ Data points: 2048                                                │
  │ Auto-detected 8 peaks                                            │
  │ Peak 1 added at 2theta = 28.4470                                │
  │ Peak 2 added at 2theta = 40.2810                                │
  │ Fitting peaks...                                                 │
  │ Successfully fitted 8 peaks                                      │
  │ Results saved to: /path/to/output                                │
  └─────────────────────────────────────────────────────────────────┘


## 工作流程示意

典型使用流程：

  ┌──────────────┐
  │ 1. Load File │  ← 点击"Load File"按钮，选择XRD数据文件
  └──────┬───────┘
         ↓
  ┌──────────────────────┐
  │ 2. 选择峰             │  ← 方式A: 点击"Auto Find Peaks"自动检测
  │    • Auto Find       │     方式B: 手动点击图表添加峰
  │    • Manual Click    │     方式C: 混合使用
  └──────┬───────────────┘
         ↓
  ┌──────────────────────┐
  │ 3. (可选) 背景扣除    │  ← 启用BG模式，点击选择背景点
  │    • Enable BG Mode  │
  │    • Select Points   │
  └──────┬───────────────┘
         ↓
  ┌──────────────────────┐
  │ 4. Fit Peaks         │  ← 点击"Fit Peaks"进行拟合
  └──────┬───────────────┘
         ↓
  ┌──────────────────────┐
  │ 5. 查看结果           │  ← 图表显示拟合曲线
  │    • Table           │     表格显示参数
  │    • Plot            │
  └──────┬───────────────┘
         ↓
  ┌──────────────────────┐
  │ 6. Save Results      │  ← 保存CSV和PNG文件
  └──────────────────────┘


## 快捷键和技巧

  图表交互：
  • 滚轮缩放     - 在图表上滚动滚轮
  • 拖拽平移     - 点击工具栏Pan按钮后拖拽
  • 框选缩放     - 点击工具栏Zoom按钮后框选区域
  • Home键       - 点击Home按钮恢复初始视图

  峰选择技巧：
  • 精确选择     - 先缩放到感兴趣区域，再点击
  • 批量删除     - 点击Reset按钮清除所有选择
  • 修正位置     - 右键删除后重新点击

  背景扣除：
  • 均匀分布     - 在数据范围内均匀选择5-10个点
  • 避开峰区     - 在峰与峰之间的低点选择
  • 边界点       - 确保在数据两端各选一个点


## 颜色方案

  界面配色（淡紫色主题）：
  • 控制面板背景   - #E6D5F5 (淡紫蓝)
  • 按钮颜色       - #B19CD9 (紫色)
  • 图表背景       - #FAF0FF (淡紫白)
  • 网格线         - #D4A5D4 (紫灰)
  • 结果表格背景   - #FFFBF0 (米黄)
  • 信息面板       - #F0E6FA (淡紫)

  数据显示：
  • 原始数据       - 蓝色 (blue)
  • 峰标记         - 红色 (red) + 黑色边框
  • 拟合曲线       - 绿色 (green)
  • 背景曲线       - 橙色 (orange) + 虚线
  • 背景点         - 皇家蓝 (RoyalBlue) + 金色边框


## 性能和限制

  推荐数据规模：
  • 数据点数      - 建议 < 10,000 点（更多也可以，但响应会变慢）
  • 峰数量        - 建议 < 50 个峰（更多可能影响拟合速度）
  • 文件大小      - < 1 MB（纯文本XRD数据）

  响应时间：
  • 加载文件      - < 1秒
  • 自动检测峰    - < 2秒
  • 拟合10个峰    - < 5秒
  • 保存结果      - < 1秒


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

最后更新：2025-12-03
版本：v2.0 - Embedded Edition
