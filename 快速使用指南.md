# 实时自动寻峰功能 - 快速使用指南

## 🎯 功能说明

像 Dioptas 一样，在手动添加标定点的基础上，系统会自动从内环到外环逐圈搜索峰位并实时显示！

**视觉效果**：
- 🔴 **红色大圆圈** = 你手动点击的位置
- 🔵 **青色小圆圈** = 系统自动找到的峰位

## 📝 使用步骤

### 1️⃣ 加载图像
```
Calibrate 模块 → Load Image File → 选择标定图像
```

### 2️⃣ 启用自动寻峰（默认已启用）
```
右侧面板 → ✅ Real-time automatic peak finding
```

### 3️⃣ 进入峰值选择模式
```
点击 "📍 Manual Peak Selection" 按钮
```

### 4️⃣ 点击衍射环
```
在第 1 个衍射环上点击一个位置
→ 🔴 出现红色手动点
→ 🔵 自动显示青色自动点（通常 30-36 个）
→ 环号自动递增

继续在第 2、3、4... 个环上点击
```

### 5️⃣ 运行标定
```
点击 "🎯 Run Calibration" 
→ 自动使用所有手动点 + 自动点进行标定
```

## ✨ 优势

| 传统方法 | 本功能 |
|----------|--------|
| 每个环需点击 3-5 次 | 每个环只需点击 1 次 |
| 手动选取，易漏点 | 自动搜索，完整覆盖 |
| 控制点少（10-20 个） | 控制点多（100+ 个） |
| 费时费力 | 快速高效 |

## 🔧 控制选项

**Automatic increase ring number**（自动递增环号）
- ✅ 推荐启用
- 每次点击后自动增加环号

**Real-time automatic peak finding**（实时自动寻峰）
- ✅ 推荐启用
- 可随时切换，不影响已有手动点

## 💡 技巧

1. **在环的明亮区域点击**：自动寻峰效果更好
2. **使用缩放功能**：鼠标滚轮缩放，精确定位
3. **调整对比度**：使用右侧滑块或 Auto Contrast
4. **从内环到外环**：按顺序添加控制点
5. **至少 3-5 个环**：获得更准确的标定结果

## 🐛 常见问题

**Q: 没有显示青色自动点？**
A: 检查 "Real-time automatic peak finding" 是否勾选

**Q: 自动点太少或没有？**
A: 调整对比度，在更亮的区域点击

**Q: 想只用手动点标定？**
A: 取消勾选 "Real-time automatic peak finding"

**Q: 点错了怎么办？**
A: 点击 "Clear" 清除所有点，或使用 "Edit" 编辑

## 📊 日志信息

启用后，控制台会显示：
```
✓ Real-time automatic peak finding ENABLED
[Auto Peak] Searching ring 1 based on manual point at (256.0, 256.0)
[Auto Peak] Found 32 peaks on ring 1
[Calibration] Total control points: 165 (5 manual + 160 auto)
```

## 🚀 开始使用

现在就试试吧！加载一张 LaB6 或 CeO2 标定图像，体验 Dioptas 风格的实时自动寻峰！

---

**需要帮助？** 查看完整文档：`REAL_TIME_AUTO_PEAK_FINDING.md`
